doctype html
head
  meta(charset='UTF-8')
  meta(http-equiv='X-UA-Compatible' content='IE=edge')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  title YOUXI | Buy the best pc parts
  script(src='https://code.iconify.design/1/1.0.7/iconify.min.js')
  link(rel='preconnect' href='https://fonts.gstatic.com')
  link(href='https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap' rel='stylesheet')
  link(rel='preconnect' href='https://fonts.gstatic.com')
  link(href='https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap' rel='stylesheet')
  link(rel='stylesheet' href='/css/firstpage.css')
  link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x' crossorigin='anonymous')
// HEADER  
include _header
p
.container
  <div class="title">Results for : #{s}</div>
  <svg height="20" width="60">
    <g fill="none" stroke="black">
      <path stroke-width="6" d="M5 10 l215 0" />
    </g>
  </svg>
  p.text-muted #{numProducts} result(s) found.
  br
  if(products.length>0)
    - var length = products.length;
    
    - var i = (length-(length%4))/4;
    
    - for (var x = 0; x < i; x++)
      .row
        - for (var y = 0; y < 4; y++)
          -z=x*4+y
          .col-6.col-md-3.mb-3
            <div class="zoom card card-product mb-4 py-3 border-0 rounded-0">
                <h4> <span class="content badge bg-danger mt-3 ms-3 d-none">SALE</span></h4>
                <div class=" content card-body my-auto ">
                    <div><img src="#{products[z].imageCover}" alt=""></div>
                </div>
                <div class="content card-footer bg-transparent border-0 text-center">
                    if(products[z].quantity>0)
                      <a href="#{ '/api/v1/cart/add-to-cart/' + products[z].id}">
                          <button type="button" class="btn AddToCart-button rounded-0">Add To Cart</button>
                      </a>
                    else
                      <button type="button" class="btn AddToCart-button rounded-0" style="border:2px solid #FF3838 !important;border-top: none !important;border-right: none !important;border-left: none !important;" disabled>Out of Stock</button>
                </div>
            </div>
            <a class="text-decoration-none text-dark " href="#{ '/p/' + products[z].id}">
              <div class="article-txt">
                  h #{products[z].name}
                  <div class="d-flex justify-content-between ">
                      <h4 class="fw-bold mt-2 ">#{ products[z].price + "DA"} </h4>
                      <h4 class="fw-bold mt-2 text-decoration-line-through text-muted "></h4>
                  </div>
              </div>
            </a>
    -i=i*4;
      .row
        - for (var x = i; x < length; x++)
          .col-6.col-md-3.mb-3
            <div class="zoom card card-product mb-4 py-3 border-0 rounded-0">
                <h4> <span class="content badge bg-danger mt-3 ms-3 d-none">SALE</span></h4>
                <div class=" content card-body my-auto ">
                    <div><img src="#{products[x].imageCover}" alt=""></div>
                </div>
                <div class="content card-footer bg-transparent border-0 text-center">
                    <a href=`${ '/p/' + products[x].id}`>
                        <button type="button" class="btn AddToCart-button rounded-0 ">Add To Cart</button>
                    </a>
                </div>
            </div>
            <a class="text-decoration-none text-dark " href=" ">
              <div class="article-txt">
                  h #{products[x].name}
                  <div class="d-flex justify-content-between ">
                      <h4 class="fw-bold mt-2 ">#{ products[x].price + "DA"} </h4>
                      <h4 class="fw-bold mt-2 text-decoration-line-through text-muted "></h4>
                  </div>
              </div>
            </a>
    
    nav(aria-label='Page navigation')
      ul.pagination.justify-content-center
        ul.pagination
          if current > 1
            li.page-item
              a.page-link(href=`?page=${parseInt(current) - 1}&s=${s}`) Previous
    
          - for (var i = 1; i <= pages; i++) {
            if current==i
              li.page-item.active
                a.page-link(href=`?page=${i}&s=${s}`)=  i
            else
              li.page-item
                a.page-link(href=`?page=${i}&s=${s}`)=  i
          - }
    
    
          if current < pages
            li.page-item
              a.page-link(href=`?page=${parseInt(current) + 1}&s=${s}`) Next
  else 
    h1.display-4 No Products Found

//FOOTER    
include _footer
script(src='https://code.iconify.design/1/1.0.7/iconify.min.js ')
script(src='https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js ' integrity='sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p ' crossorigin='anonymous ')
script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js ' integrity='sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT ' crossorigin='anonymous ')
